<template>
  <header>
    <a href="/" style="padding-right: 0.5em"
      ><svg
        t="1632630992200"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="8721"
        width="42"
        height="42"
      >
        <path
          d="M725.333333 768a85.333333 85.333333 0 0 0 85.333334-85.333333V298.666667a85.333333 85.333333 0 0 0-85.333334-85.333334h-195.84a42.666667 42.666667 0 0 1-29.866666-12.373333l-60.586667-60.586667a42.666667 42.666667 0 0 0-29.866667-12.373333H128a85.333333 85.333333 0 0 0-85.333333 85.333333v469.333334a85.333333 85.333333 0 0 0 85.333333 85.333333zM320 256A64 64 0 1 1 256 320 64 64 0 0 1 320 256z m405.333333 405.333333a21.333333 21.333333 0 0 1-21.333333 21.333334h-554.666667a21.333333 21.333333 0 0 1-21.333333-21.333334v-14.506666a19.626667 19.626667 0 0 1 4.693333-12.8L256 477.44a22.186667 22.186667 0 0 1 14.933333-8.106667 21.333333 21.333333 0 0 1 16.64 7.68l61.866667 74.666667a20.906667 20.906667 0 0 0 16.213333 7.68 21.76 21.76 0 0 0 17.066667-8.533333l122.88-158.72a21.76 21.76 0 0 1 34.133333 0l181.333334 241.92a21.76 21.76 0 0 1 4.266666 12.8zM896 384v384a85.333333 85.333333 0 0 1-85.333333 85.333333H213.333333a85.333333 85.333333 0 0 0 85.333334 85.333334h512a170.666667 170.666667 0 0 0 170.666666-170.666667v-298.666667a85.333333 85.333333 0 0 0-85.333333-85.333333z"
          p-id="8722"
          fill="#e6e6e6"
        ></path>
      </svg>
    </a>
    <action
      v-if="showMenu !== undefined"
      class="menu-button"
      icon="menu"
      :label="$t('buttons.toggleSidebar')"
      @action="openSidebar()"
    />

    <slot />

    <div id="dropdown" :class="{ active: this.$store.state.show === 'more' }">
      <slot name="actions"> </slot>
    </div>
    <div id="dropdown2" :class="{ active: this.$store.state.show === 'more' }">
      <slot name="actions2">
        <button title="新建文件夹" class="action">
          <i
            @click="$store.commit('showHover', 'newDir')"
            id="newDir"
            class="material-icons"
            >create_new_folder</i
          ><span>新建文件夹</span>
        </button>

        <button title="新文件" class="action">
          <i
            @click="$store.commit('showHover', 'newFile')"
            id="newFile"
            class="material-icons"
          >
            <svg
              t="1632630409083"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6602"
              width="28"
              height="28"
            >
              <path
                d="M512 149.333333c200.298667 0 362.666667 162.368 362.666667 362.666667s-162.368 362.666667-362.666667 362.666667S149.333333 712.298667 149.333333 512 311.701333 149.333333 512 149.333333z m0 64c-164.949333 0-298.666667 133.717333-298.666667 298.666667s133.717333 298.666667 298.666667 298.666667 298.666667-133.717333 298.666667-298.666667-133.717333-298.666667-298.666667-298.666667z m32 106.666667v160H704v64h-160V704h-64v-160.021333L320 544v-64l160-0.021333V320h64z"
                p-id="6603"
                fill="#e6e6e6"
              ></path>
            </svg> </i
          ><span>新文件</span>
        </button>

        <button title="设置" class="action">
          <i @click="setting" id="setting" class="material-icons"
            ><svg
              t="1632630688651"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6768"
              width="28"
              height="28"
            >
              <path
                d="M448.362667 166.826667l113.6 0.170666a64 64 0 0 1 63.893333 63.914667l0.042667 18.517333a301.461333 301.461333 0 0 1 62.101333 34.88l15.210667-8.746666a64 64 0 0 1 87.296 23.381333l56.938666 98.304a64 64 0 0 1-19.989333 85.397333l-3.477333 2.133334-15.274667 8.810666c2.624 24.234667 2.304 48.853333-1.130667 73.322667l10.794667 6.250667a64 64 0 0 1 25.216 84.117333l-1.770667 3.306667-53.333333 92.373333a64 64 0 0 1-84.117333 25.216l-3.328-1.792-14.741334-8.533333a298.538667 298.538667 0 0 1-59.626666 33.28v25.386666a64 64 0 0 1-59.989334 63.957334l-4.074666 0.128-113.6-0.170667a64 64 0 0 1-63.893334-63.893333l-0.064-30.613334a302.613333 302.613333 0 0 1-50.069333-29.696l-27.221333 15.658667a64 64 0 0 1-87.296-23.402667l-56.938667-98.282666a64 64 0 0 1 19.989333-85.418667l3.477334-2.133333 27.690666-15.936c-2.133333-20.266667-2.24-40.768-0.192-61.226667l-30.741333-17.770667A64 64 0 0 1 158.506667 393.6l1.792-3.306667 53.333333-92.373333a64 64 0 0 1 84.117333-25.216l3.306667 1.792 26.794667 15.466667a297.984 297.984 0 0 1 56.426666-34.666667v-24.362667a64 64 0 0 1 59.989334-63.978666l4.074666-0.128z m-0.085334 64l0.064 65.066666-36.778666 17.301334c-15.744 7.402667-30.613333 16.533333-44.309334 27.221333l-34.005333 26.538667-62.570667-36.138667-1.6-0.896-53.333333 92.373333 66.56 38.421334-4.138667 41.152c-1.6 15.978667-1.536 32.106667 0.149334 48.085333l4.394666 41.429333-63.786666 36.736 56.917333 98.282667 63.338667-36.416 33.6 24.597333a237.994667 237.994667 0 0 0 39.466666 23.424l36.736 17.258667 0.128 71.168 113.578667 0.170667-0.064-68.16 39.466667-16.426667a234.538667 234.538667 0 0 0 46.826666-26.112l33.578667-24.128 50.56 29.184 53.290667-92.394667-48.128-27.818666 5.973333-42.688c2.666667-19.093333 2.965333-38.421333 0.896-57.6l-4.48-41.450667 51.456-29.696-56.938667-98.282667-51.2 29.504-33.621333-24.512a238.037333 238.037333 0 0 0-48.938667-27.498666l-39.381333-16.341334-0.128-61.184-113.578667-0.170666z m127.381334 183.722666a128.170667 128.170667 0 0 1 46.890666 174.933334 127.829333 127.829333 0 0 1-174.762666 46.848 128.170667 128.170667 0 0 1-46.869334-174.933334 127.829333 127.829333 0 0 1 174.741334-46.848z m-119.317334 78.805334a64.170667 64.170667 0 0 0 23.466667 87.573333 63.829333 63.829333 0 0 0 87.296-23.402667 64.170667 64.170667 0 0 0-20.266667-85.589333l-3.2-1.984-3.306666-1.770667a63.829333 63.829333 0 0 0-83.989334 25.173334z"
                p-id="6769"
                fill="#e6e6e6"
              ></path></svg></i
          ><span>设置</span
          ><!---->
        </button>

        <button title="退出" class="action">
          <i @click="logout" id="logout" class="material-icons"
            ><svg
              t="1632630762049"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="7679"
              width="23"
              height="23"
            >
              <path
                d="M570.107 47.258H453.903V572.78h116.199V47.258z m208.86 86.886l-81.316 80.794c92.872 63.457 162.427 173.143 162.427 300.052 0 190.48-156.544 346.286-348.175 346.286-191.427 0-348.176-155.807-348.176-346.286 0-126.91 69.76-236.595 168.31-294.277l-86.994-86.569C129.055 220.713 47.733 359.188 47.733 514.99c0 254.04 209.076 461.752 464.165 461.752 255.298 0 464.368-207.708 464.368-461.752 0.005-155.802-81.31-294.277-197.299-380.846z"
                p-id="7680"
                fill="#e6e6e6"
              ></path></svg></i
          ><span>退出</span
          ><!---->
        </button>
      </slot>
    </div>

    <action
      v-if="this.$slots.actions"
      id="more"
      icon="more_vert"
      :label="$t('buttons.more')"
      @action="$store.commit('showHover', 'more')"
    />

    <div
      class="overlay"
      v-show="this.$store.state.show == 'more'"
      @click="$store.commit('closeHovers')"
    />
  </header>
</template>

<script>
import { logoURL } from "@/utils/constants";

import Action from "@/components/header/Action";
import * as auth from "@/utils/auth";

export default {
  name: "header-bar",
  props: ["showLogo", "showMenu"],
  components: {
    Action,
  },
  data: function () {
    return {
      logoURL,
    };
  },
  methods: {
    openSidebar() {
      this.$store.commit("showHover", "sidebar");
    },
    logout: auth.logout,
    setting() {
      this.$router.push({ path: "/settings/profile" });
    },
  },
};
</script>

<style></style>
